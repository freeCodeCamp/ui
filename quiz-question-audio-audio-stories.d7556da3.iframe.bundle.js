"use strict";(self.webpackChunk_freecodecamp_ui=self.webpackChunk_freecodecamp_ui||[]).push([[373],{"./src/quiz-question/audio/audio.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithAriaLabel:()=>WithAriaLabel,WithAudioSegment:()=>WithAudioSegment,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={component:__webpack_require__("./src/quiz-question/audio/audio.tsx").f,title:"Internal Components/Audio",parameters:{controls:{expanded:!0}}},Default={args:{src:"https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3","aria-label":"Audio player"},parameters:{docs:{source:{code:'<Audio \n  src="https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3"\n  aria-label="Audio player"\n/>'}}}},WithAriaLabel={args:{src:"https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3","aria-label":"Example audio clip"},parameters:{docs:{source:{code:'<Audio \n  src="https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3"\n  aria-label="Example audio clip"\n/>'}}}},WithAudioSegment={args:{src:"https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3","aria-label":"Audio segment demo",startTime:2,finishTime:5},parameters:{docs:{description:{story:"This story demonstrates the Audio component with `startTime` and `finishTime` props, which play only a segment of the audio instead of the full clip."},source:{code:'<Audio \n  src="https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3"\n  aria-label="Audio segment demo"\n  startTime={2}\n  finishTime={5}\n/>'}}}},__namedExportsOrder=["Default","WithAriaLabel","WithAudioSegment"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  args: {\n    src: "https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3",\n    "aria-label": "Audio player"\n  },\n  parameters: {\n    docs: {\n      source: {\n        code: `<Audio \n  src="https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3"\n  aria-label="Audio player"\n/>`\n      }\n    }\n  }\n}',...Default.parameters?.docs?.source}}},WithAriaLabel.parameters={...WithAriaLabel.parameters,docs:{...WithAriaLabel.parameters?.docs,source:{originalSource:'{\n  args: {\n    src: "https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3",\n    "aria-label": "Example audio clip"\n  },\n  parameters: {\n    docs: {\n      source: {\n        code: `<Audio \n  src="https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3"\n  aria-label="Example audio clip"\n/>`\n      }\n    }\n  }\n}',...WithAriaLabel.parameters?.docs?.source}}},WithAudioSegment.parameters={...WithAudioSegment.parameters,docs:{...WithAudioSegment.parameters?.docs,source:{originalSource:'{\n  args: {\n    src: "https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3",\n    "aria-label": "Audio segment demo",\n    startTime: 2,\n    finishTime: 5\n  },\n  parameters: {\n    docs: {\n      description: {\n        story: "This story demonstrates the Audio component with `startTime` and `finishTime` props, which play only a segment of the audio instead of the full clip."\n      },\n      source: {\n        code: `<Audio \n  src="https://cdn.freecodecamp.org/curriculum/english/animation-assets/sounds/1.1-1.mp3"\n  aria-label="Audio segment demo"\n  startTime={2}\n  finishTime={5}\n/>`\n      }\n    }\n  }\n}',...WithAudioSegment.parameters?.docs?.source}}}},"./src/quiz-question/audio/audio.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>Audio});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/react@16.14.0/node_modules/react/index.js"),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@fortawesome+react-fontawesome@0.2.6_@fortawesome+fontawesome-svg-core@7.1.0_react@16.14.0/node_modules/@fortawesome/react-fontawesome/index.es.js"),_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@fortawesome+free-solid-svg-icons@7.1.0/node_modules/@fortawesome/free-solid-svg-icons/index.mjs");const Audio=_ref=>{let{src,"aria-label":ariaLabel,className="",startTime=0,finishTime}=_ref;const audioRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[isPlaying,setIsPlaying]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[currentTime,setCurrentTime]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),[duration,setDuration]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),finishTimerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),segmentDuration=void 0!==finishTime?finishTime-startTime:duration-startTime,resetAudio=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{const audio=audioRef.current;audio&&(finishTimerRef.current&&(clearTimeout(finishTimerRef.current),finishTimerRef.current=void 0),audio.pause(),audio.currentTime=startTime,setIsPlaying(!1),setCurrentTime(0))}),[startTime]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const audio=audioRef.current;if(!audio)return;const handleLoadedMetadata=()=>{audio.currentTime=startTime,setDuration(audio.duration),setCurrentTime(0)},handleTimeUpdate=()=>{const relativeTime=audio.currentTime-startTime;setCurrentTime(relativeTime),void 0!==finishTime&&audio.currentTime>=finishTime&&resetAudio()},handleEnded=()=>{resetAudio()};return audio.addEventListener("loadedmetadata",handleLoadedMetadata),audio.addEventListener("timeupdate",handleTimeUpdate),audio.addEventListener("ended",handleEnded),()=>{audio.removeEventListener("loadedmetadata",handleLoadedMetadata),audio.removeEventListener("timeupdate",handleTimeUpdate),audio.removeEventListener("ended",handleEnded),finishTimerRef.current&&clearTimeout(finishTimerRef.current)}}),[startTime,finishTime,resetAudio]);const formatTime=time=>{if(isNaN(time))return"0:00";return`${Math.floor(time/60)}:${Math.floor(time%60).toString().padStart(2,"0")}`},audioSrc=startTime>0?`${src}#t=${startTime}`:src;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("figure",{className},react__WEBPACK_IMPORTED_MODULE_0__.createElement("audio",{ref:audioRef,src:audioSrc,"aria-label":ariaLabel}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"flex items-center gap-3 bg-background-primary px-2.5 py-2 w-full max-w-md rounded border-x-4 border-t-4 border-b-4 border-background-tertiary"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{onClick:()=>{const audio=audioRef.current;audio&&(isPlaying?(audio.pause(),setIsPlaying(!1)):(audio.play(),setIsPlaying(!0)))},className:"text-foreground-tertiary bg-transparent border-none p-0 scale-75 transition-transform","aria-label":isPlaying?"Pause":"Play"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_1__.g,{icon:isPlaying?_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__.M6O:_fortawesome_free_solid_svg_icons__WEBPACK_IMPORTED_MODULE_2__.qtl,size:"3x",className:"fa-width-auto"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"flex-1 flex items-center gap-2"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"text-foreground-primary text-sm min-w-[2.5rem]"},formatTime(currentTime)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{type:"range",min:"0",max:segmentDuration,value:currentTime,onChange:e=>{const audio=audioRef.current;if(!audio)return;const relativeTime=parseFloat(e.target.value),absoluteTime=startTime+relativeTime;audio.currentTime=absoluteTime,setCurrentTime(relativeTime)},className:"flex-1 h-1 bg-background-tertiary rounded appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-foreground-tertiary [&::-moz-range-thumb]:w-3 [&::-moz-range-thumb]:h-3 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-foreground-tertiary [&::-moz-range-thumb]:border-0 [&::-webkit-slider-track]:bg-background-tertiary [&::-moz-range-track]:bg-background-tertiary","aria-label":"Seek audio"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:"text-foreground-primary text-sm min-w-[2.5rem]"},formatTime(segmentDuration)))))};try{Audio.displayName="Audio",Audio.__docgenInfo={description:"",displayName:"Audio",props:{src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!0,type:{name:"string"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string | undefined"}},startTime:{defaultValue:{value:"0"},description:"",name:"startTime",required:!1,type:{name:"number | undefined"}},finishTime:{defaultValue:null,description:"",name:"finishTime",required:!1,type:{name:"number | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/quiz-question/audio/audio.tsx#Audio"]={docgenInfo:Audio.__docgenInfo,name:"Audio",path:"src/quiz-question/audio/audio.tsx#Audio"})}catch(__react_docgen_typescript_loader_error){}}}]);